Environment check:
Current directory: /Users/mokanichokani/Documents/mcCode/Kimaaka/Kimaaka-extension/ISEkimaaka/server
MONGODB_URI exists: true
JWT_SECRET exists: true
MONGODB_URI starts with mongodb: true

============================================================
[2025-08-10T16:56:37.310Z] üöÄ Kimaaka Server Started Successfully!
[2025-08-10T16:56:37.310Z] üåê Server running on port 3004
[2025-08-10T16:56:37.310Z] üìä Admin panel (via server): http://localhost:3004/admin/admin.html
[2025-08-10T16:56:37.310Z] üìä Admin panel (standalone): See admin-dashboard/README.md
[2025-08-10T16:56:37.310Z] üîë API endpoint: http://localhost:3004/api/gemini-key
[2025-08-10T16:56:37.310Z] üíù Donation endpoint: http://localhost:3004/api/donate-key
[2025-08-10T16:56:37.310Z] üìã Health check: http://localhost:3004/api/health
============================================================
[2025-08-10T16:56:37.310Z] üëÄ Monitoring all requests...

[2025-08-10T16:56:37.471Z] üîó Mongoose connected to MongoDB
[2025-08-10T16:56:37.472Z] üóÑÔ∏è Connected to MongoDB successfully
üìä Resumed usage tracking for server: http://localhost:3004/api
[2025-08-10T16:59:30.705Z] GET /api/health - IP: ::1
[2025-08-10T16:59:30.705Z] Response: 200 GET /api/health
[2025-08-10T16:59:37.913Z] GET /api/health - IP: ::1
[2025-08-10T16:59:37.913Z] Response: 200 GET /api/health
[2025-08-10T16:59:39.955Z] GET /api/health - IP: ::1
[2025-08-10T16:59:39.955Z] Response: 200 GET /api/health
[2025-08-10T16:59:54.523Z] GET /api/health - IP: ::1
[2025-08-10T16:59:54.523Z] Response: 200 GET /api/health
[2025-08-10T17:10:32.091Z] GET /api/health - IP: ::1
[2025-08-10T17:10:32.091Z] Response: 200 GET /api/health
[2025-08-10T17:10:35.577Z] GET /api/health - IP: ::1
[2025-08-10T17:10:35.577Z] Response: 200 GET /api/health
[2025-08-10T17:10:46.320Z] GET /api/health - IP: ::1
[2025-08-10T17:10:46.320Z] Response: 200 GET /api/health
[2025-08-10T17:11:01.445Z] GET /api/health - IP: ::1
[2025-08-10T17:11:01.445Z] Response: 200 GET /api/health
[2025-08-10T17:11:31.446Z] GET /api/health - IP: ::1
[2025-08-10T17:11:31.446Z] Response: 200 GET /api/health
[2025-08-10T17:12:32.445Z] GET /api/health - IP: ::1
[2025-08-10T17:12:32.445Z] Response: 200 GET /api/health
[2025-08-10T17:13:33.448Z] GET /api/health - IP: ::1
[2025-08-10T17:13:33.448Z] Response: 200 GET /api/health
[2025-08-10T17:14:00.540Z] GET /api/health - IP: ::1
[2025-08-10T17:14:00.540Z] Response: 200 GET /api/health
[2025-08-10T17:14:08.832Z] GET /api/health - IP: ::1
[2025-08-10T17:14:08.832Z] Response: 200 GET /api/health
[2025-08-10T17:14:10.161Z] GET /api/health - IP: ::1
[2025-08-10T17:14:10.161Z] Response: 200 GET /api/health
[2025-08-10T17:19:49.358Z] GET /api/health - IP: ::1
[2025-08-10T17:19:49.358Z] Response: 200 GET /api/health
[2025-08-10T17:19:59.390Z] GET /api/health - IP: ::1
[2025-08-10T17:19:59.390Z] Response: 200 GET /api/health
[2025-08-10T17:20:00.533Z] GET /api/health - IP: ::1
[2025-08-10T17:20:00.533Z] Response: 200 GET /api/health
[2025-08-10T17:21:35.057Z] GET /api/health - IP: ::1
[2025-08-10T17:21:35.057Z] Response: 200 GET /api/health
[2025-08-10T17:22:01.440Z] GET /api/health - IP: ::1
[2025-08-10T17:22:01.440Z] Response: 200 GET /api/health
[2025-08-10T17:22:31.437Z] GET /api/health - IP: ::1
[2025-08-10T17:22:31.437Z] Response: 200 GET /api/health
[2025-08-10T17:22:56.354Z] GET /api/health - IP: ::1
[2025-08-10T17:22:56.354Z] Response: 200 GET /api/health
[2025-08-10T17:23:00.559Z] GET /api/health - IP: ::1
[2025-08-10T17:23:00.559Z] Response: 200 GET /api/health
[2025-08-10T17:23:03.070Z] GET /api/health - IP: ::1
[2025-08-10T17:23:03.070Z] Response: 200 GET /api/health
[2025-08-10T17:23:03.937Z] GET /api/health - IP: ::1
[2025-08-10T17:23:03.937Z] Response: 200 GET /api/health
[2025-08-10T17:23:04.696Z] GET /api/health - IP: ::1
[2025-08-10T17:23:04.696Z] Response: 200 GET /api/health
[2025-08-10T17:23:10.301Z] GET /api/health - IP: ::1
[2025-08-10T17:23:10.301Z] Response: 200 GET /api/health
[2025-08-10T17:23:11.259Z] GET /api/health - IP: ::1
[2025-08-10T17:23:11.259Z] Response: 200 GET /api/health
[2025-08-10T17:23:20.455Z] GET /api/health - IP: ::1
[2025-08-10T17:23:20.455Z] Response: 200 GET /api/health
[2025-08-10T17:23:21.115Z] GET /api/health - IP: ::1
[2025-08-10T17:23:21.115Z] Response: 200 GET /api/health
[2025-08-10T17:23:30.557Z] GET /api/health - IP: ::1
[2025-08-10T17:23:30.557Z] Response: 200 GET /api/health
[2025-08-10T17:24:01.472Z] GET /api/health - IP: ::1
[2025-08-10T17:24:01.472Z] Response: 200 GET /api/health
[2025-08-10T17:24:31.527Z] GET /api/health - IP: ::1
[2025-08-10T17:24:31.527Z] Response: 200 GET /api/health
[2025-08-10T17:25:01.470Z] GET /api/health - IP: ::1
[2025-08-10T17:25:01.470Z] Response: 200 GET /api/health
[2025-08-10T17:25:31.484Z] GET /api/health - IP: ::1
[2025-08-10T17:25:31.484Z] Response: 200 GET /api/health
[2025-08-10T17:26:32.722Z] GET /api/health - IP: ::1
[2025-08-10T17:26:32.722Z] Response: 200 GET /api/health
[2025-08-10T17:27:01.475Z] GET /api/health - IP: ::1
[2025-08-10T17:27:01.475Z] Response: 200 GET /api/health
[2025-08-10T17:27:31.471Z] GET /api/health - IP: ::1
[2025-08-10T17:27:31.471Z] Response: 200 GET /api/health
[2025-08-10T17:28:01.477Z] GET /api/health - IP: ::1
[2025-08-10T17:28:01.477Z] Response: 200 GET /api/health
[2025-08-10T17:28:48.477Z] GET /api/health - IP: ::1
[2025-08-10T17:28:48.477Z] Response: 200 GET /api/health
[2025-08-10T17:28:53.430Z] GET /api/gemini-key - IP: ::1
[2025-08-10T17:28:53.430Z] üîë API Key Request - Using round-robin allocation...
[2025-08-10T17:28:53.431Z] üîÑ Starting round-robin API key allocation...
[2025-08-10T17:28:53.431Z] üéØ Found 3 keys with minimum allocation count: 1
[2025-08-10T17:28:53.431Z] üß™ Testing admin key AIzaSyDn......
[2025-08-10T17:28:53.464Z] üß™ Testing API key AIzaSyDn... with Gemini API...
[2025-08-10T17:28:53.464Z] ‚úÖ API key AIzaSyDn... validation successful
[2025-08-10T17:28:53.431Z] ‚úÖ Key AIzaSyDn... is valid, allocating...
[2025-08-10T17:28:53.431Z] üìä Updated admin key allocation count to 2
üìà Tracked allocation for http://localhost:3004/api - Total: 1
[2025-08-10T17:28:53.430Z] ‚úÖ API Key Provided: AIzaSyDn...DH3Y (908ms)
[2025-08-10T17:28:53.430Z] Response: 200 GET /api/gemini-key
[2025-08-10T17:28:57.170Z] GET /api/health - IP: ::1
[2025-08-10T17:29:11.963Z] GET /api/health - IP: ::1
[2025-08-10T17:29:11.963Z] Response: 200 GET /api/health
[2025-08-10T17:29:15.305Z] GET /api/health - IP: ::1
[2025-08-10T17:29:15.308Z] GET /api/admin/auth/verify - IP: ::1
[2025-08-10T17:29:15.305Z] Response: 200 GET /api/health
[2025-08-10T17:29:15.431Z] GET /api/admin/recent-activity - IP: ::1
[2025-08-10T17:29:15.436Z] ‚ö†Ô∏è Mongoose disconnected from MongoDB
[2025-08-10T17:29:15.513Z] üîó Mongoose connected to MongoDB
[2025-08-10T17:29:15.431Z] Response: 200 GET /api/admin/recent-activity
[2025-08-10T17:29:15.308Z] Response: 200 GET /api/admin/auth/verify
[2025-08-10T17:29:15.813Z] GET /api/admin/stats - IP: ::1
üìä Resumed usage tracking for server: http://localhost:3004/api
[2025-08-10T17:29:15.813Z] Response: 200 GET /api/admin/stats
[2025-08-10T17:29:16.010Z] GET /api/health - IP: ::1
[2025-08-10T17:29:16.010Z] Response: 200 GET /api/health
[2025-08-10T17:29:16.054Z] GET /api/admin/recent-activity - IP: ::1
[2025-08-10T17:29:16.054Z] Response: 200 GET /api/admin/recent-activity
[2025-08-10T17:28:57.170Z] Response: 200 GET /api/health
[2025-08-10T17:29:19.152Z] GET /api/health - IP: ::1
[2025-08-10T17:29:19.152Z] Response: 200 GET /api/health
[2025-08-10T17:29:19.182Z] GET /api/admin/api-keys - IP: ::1
[2025-08-10T17:29:19.182Z] Response: 200 GET /api/admin/api-keys
[2025-08-10T17:29:19.889Z] GET /api/admin/stats - IP: ::1
[2025-08-10T17:29:19.889Z] Response: 200 GET /api/admin/stats
[2025-08-10T17:29:19.928Z] GET /api/health - IP: ::1
[2025-08-10T17:29:19.928Z] Response: 200 GET /api/health
[2025-08-10T17:29:19.969Z] GET /api/admin/recent-activity - IP: ::1
[2025-08-10T17:29:19.969Z] Response: 200 GET /api/admin/recent-activity
[2025-08-10T17:29:21.735Z] GET /api/health - IP: ::1
[2025-08-10T17:29:21.735Z] Response: 200 GET /api/health
[2025-08-10T17:29:21.763Z] GET /api/health - IP: ::1
[2025-08-10T17:29:21.766Z] GET /api/admin/server-usage - IP: ::1
[2025-08-10T17:29:21.766Z] Response: 200 GET /api/admin/server-usage
[2025-08-10T17:29:21.763Z] Response: 200 GET /api/health
[2025-08-10T17:29:21.795Z] GET /api/admin/server-analytics?days=7 - IP: ::1
[2025-08-10T17:29:21.795Z] Response: 200 GET /api/admin/server-analytics?days=7
[2025-08-10T17:29:25.187Z] GET /api/health - IP: ::1
[2025-08-10T17:29:25.187Z] Response: 200 GET /api/health
[2025-08-10T17:29:29.455Z] GET /api/admin/stats - IP: ::1
[2025-08-10T17:29:29.455Z] Response: 200 GET /api/admin/stats
[2025-08-10T17:29:29.491Z] GET /api/health - IP: ::1
[2025-08-10T17:29:29.491Z] Response: 200 GET /api/health
[2025-08-10T17:29:29.532Z] GET /api/admin/recent-activity - IP: ::1
[2025-08-10T17:29:29.532Z] Response: 200 GET /api/admin/recent-activity
[2025-08-10T17:29:35.900Z] GET /api/health - IP: ::1
[2025-08-10T17:29:35.900Z] Response: 200 GET /api/health
[2025-08-10T17:29:37.104Z] GET /api/admin/stats - IP: ::1
[2025-08-10T17:29:37.104Z] Response: 200 GET /api/admin/stats
[2025-08-10T17:29:37.145Z] GET /api/health - IP: ::1
[2025-08-10T17:29:37.145Z] Response: 200 GET /api/health
[2025-08-10T17:29:37.185Z] GET /api/admin/recent-activity - IP: ::1
[2025-08-10T17:29:37.185Z] Response: 200 GET /api/admin/recent-activity
[2025-08-10T17:29:38.900Z] GET /api/health - IP: ::1
[2025-08-10T17:29:38.900Z] Response: 200 GET /api/health
[2025-08-10T17:35:47.458Z] GET /api/health - IP: ::1
[2025-08-10T17:35:51.459Z] GET /api/health - IP: ::1
[2025-08-10T17:35:55.454Z] GET /api/health - IP: ::1
[2025-08-10T17:36:52.091Z] ‚ö†Ô∏è Mongoose disconnected from MongoDB
[2025-08-10T17:37:10.494Z] üîó Mongoose connected to MongoDB
[2025-08-10T17:35:47.458Z] Response: 200 GET /api/health
üìä Resumed usage tracking for server: http://localhost:3004/api
[2025-08-10T17:35:51.459Z] Response: 200 GET /api/health
[2025-08-10T17:35:55.454Z] Response: 200 GET /api/health
[2025-08-10T17:40:56.760Z] GET /api/gemini-key - IP: ::1
[2025-08-10T17:40:56.761Z] üîë API Key Request - Using round-robin allocation...
[2025-08-10T17:40:56.762Z] üîÑ Starting round-robin API key allocation...
[2025-08-10T17:40:56.762Z] üéØ Found 3 keys with minimum allocation count: 1
[2025-08-10T17:40:56.762Z] üß™ Testing admin key AIzaSyBZ......
[2025-08-10T17:40:56.798Z] üß™ Testing API key AIzaSyBZ... with Gemini API...
[2025-08-10T17:40:56.798Z] ‚úÖ API key AIzaSyBZ... validation successful
[2025-08-10T17:40:56.762Z] ‚úÖ Key AIzaSyBZ... is valid, allocating...
[2025-08-10T17:40:56.762Z] üìä Updated admin key allocation count to 2
üìà Tracked allocation for http://localhost:3004/api - Total: 2
[2025-08-10T17:40:56.761Z] ‚úÖ API Key Provided: AIzaSyBZ...hQjg (1069ms)
[2025-08-10T17:40:56.760Z] Response: 200 GET /api/gemini-key
[2025-08-10T17:42:59.645Z] GET /api/gemini-key - IP: ::1
[2025-08-10T17:42:59.651Z] üîë API Key Request - Using round-robin allocation...
[2025-08-10T17:42:59.651Z] üîÑ Starting round-robin API key allocation...
[2025-08-10T17:42:59.651Z] üéØ Found 2 keys with minimum allocation count: 1
[2025-08-10T17:42:59.651Z] üß™ Testing admin key AIzaSyBj......
[2025-08-10T17:42:59.714Z] üß™ Testing API key AIzaSyBj... with Gemini API...
[2025-08-10T17:42:59.714Z] ‚úÖ API key AIzaSyBj... validation successful
[2025-08-10T17:42:59.651Z] ‚úÖ Key AIzaSyBj... is valid, allocating...
[2025-08-10T17:42:59.651Z] üìä Updated admin key allocation count to 2
üìà Tracked allocation for http://localhost:3004/api - Total: 3
[2025-08-10T17:42:59.651Z] ‚úÖ API Key Provided: AIzaSyBj...wofA (833ms)
[2025-08-10T17:42:59.645Z] Response: 200 GET /api/gemini-key
[2025-08-10T18:03:30.635Z] GET /api/gemini-key - IP: ::1
[2025-08-10T18:03:30.636Z] üîë API Key Request - Using round-robin allocation...
[2025-08-10T18:03:30.636Z] üîÑ Starting round-robin API key allocation...
[2025-08-10T18:03:30.636Z] üéØ Found 2 keys with minimum allocation count: 2
[2025-08-10T18:03:30.636Z] üß™ Testing admin key AIzaSyBj......
[2025-08-10T18:03:30.726Z] üß™ Testing API key AIzaSyBj... with Gemini API...
[2025-08-10T18:03:30.726Z] ‚úÖ API key AIzaSyBj... validation successful
[2025-08-10T18:03:30.636Z] ‚úÖ Key AIzaSyBj... is valid, allocating...
[2025-08-10T18:03:30.636Z] üìä Updated admin key allocation count to 3
üìà Tracked allocation for http://localhost:3004/api - Total: 4
[2025-08-10T18:03:30.636Z] ‚úÖ API Key Provided: AIzaSyBj...wofA (1073ms)
[2025-08-10T18:03:30.635Z] Response: 200 GET /api/gemini-key
[2025-08-10T18:13:40.533Z] GET /api/health - IP: ::1
[2025-08-10T18:13:40.533Z] Response: 200 GET /api/health
[2025-08-10T18:13:46.149Z] GET /api/health - IP: ::1
[2025-08-10T18:13:46.149Z] Response: 200 GET /api/health
[2025-08-10T18:14:16.505Z] GET /api/health - IP: ::1
[2025-08-10T18:14:16.505Z] Response: 200 GET /api/health
[2025-08-10T18:14:46.517Z] GET /api/health - IP: ::1
[2025-08-10T18:14:46.517Z] Response: 200 GET /api/health
[2025-08-10T18:15:16.516Z] GET /api/health - IP: ::1
[2025-08-10T18:15:16.516Z] Response: 200 GET /api/health
[2025-08-10T18:15:46.520Z] GET /api/health - IP: ::1
[2025-08-10T18:15:46.520Z] Response: 200 GET /api/health
[2025-08-10T18:16:16.521Z] GET /api/health - IP: ::1
[2025-08-10T18:16:16.521Z] Response: 200 GET /api/health
[2025-08-10T18:16:21.346Z] GET /api/health - IP: ::1
[2025-08-10T18:16:21.346Z] Response: 200 GET /api/health
[2025-08-10T18:16:33.412Z] GET /api/health - IP: ::1
[2025-08-10T18:16:33.412Z] Response: 200 GET /api/health
[2025-08-10T18:16:46.519Z] GET /api/health - IP: ::1
[2025-08-10T18:16:46.519Z] Response: 200 GET /api/health
[2025-08-10T18:17:16.648Z] GET /api/health - IP: ::1
[2025-08-10T18:17:16.648Z] Response: 200 GET /api/health
[2025-08-10T18:17:48.512Z] GET /api/health - IP: ::1
[2025-08-10T18:17:48.512Z] Response: 200 GET /api/health
[2025-08-10T18:18:48.553Z] GET /api/health - IP: ::1
[2025-08-10T18:18:48.553Z] Response: 200 GET /api/health
[2025-08-10T18:19:48.519Z] GET /api/health - IP: ::1
[2025-08-10T18:19:48.519Z] Response: 200 GET /api/health
[2025-08-10T18:20:48.537Z] GET /api/health - IP: ::1
[2025-08-10T18:20:48.537Z] Response: 200 GET /api/health
[2025-08-10T18:21:48.534Z] GET /api/health - IP: ::1
[2025-08-10T18:21:48.534Z] Response: 200 GET /api/health
[2025-08-10T18:22:48.518Z] GET /api/health - IP: ::1
[2025-08-10T18:22:48.518Z] Response: 200 GET /api/health
[2025-08-10T18:23:48.536Z] GET /api/health - IP: ::1
[2025-08-10T18:23:48.536Z] Response: 200 GET /api/health
[2025-08-10T18:24:48.532Z] GET /api/health - IP: ::1
[2025-08-10T18:24:48.532Z] Response: 200 GET /api/health
[2025-08-10T18:25:48.534Z] GET /api/health - IP: ::1
[2025-08-10T18:25:48.534Z] Response: 200 GET /api/health
[2025-08-10T18:26:48.532Z] GET /api/health - IP: ::1
[2025-08-10T18:26:48.532Z] Response: 200 GET /api/health
[2025-08-10T18:27:48.537Z] GET /api/health - IP: ::1
[2025-08-10T18:27:48.537Z] Response: 200 GET /api/health
