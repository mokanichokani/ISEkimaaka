Environment check:
Current directory: /Users/mokanichokani/Documents/mcCode/Kimaaka/Kimaaka-extension/ISEkimaaka/server
MONGODB_URI exists: true
JWT_SECRET exists: true
MONGODB_URI starts with mongodb: true

============================================================
[2025-08-10T16:56:33.226Z] üöÄ Kimaaka Server Started Successfully!
[2025-08-10T16:56:33.226Z] üåê Server running on port 3002
[2025-08-10T16:56:33.226Z] üìä Admin panel (via server): http://localhost:3002/admin/admin.html
[2025-08-10T16:56:33.226Z] üìä Admin panel (standalone): See admin-dashboard/README.md
[2025-08-10T16:56:33.226Z] üîë API endpoint: http://localhost:3002/api/gemini-key
[2025-08-10T16:56:33.226Z] üíù Donation endpoint: http://localhost:3002/api/donate-key
[2025-08-10T16:56:33.226Z] üìã Health check: http://localhost:3002/api/health
============================================================
[2025-08-10T16:56:33.226Z] üëÄ Monitoring all requests...

[2025-08-10T16:56:33.399Z] üîó Mongoose connected to MongoDB
[2025-08-10T16:56:33.400Z] üóÑÔ∏è Connected to MongoDB successfully
üìä Resumed usage tracking for server: http://localhost:3002/api
[2025-08-10T16:59:30.706Z] GET /api/health - IP: ::1
[2025-08-10T16:59:30.706Z] Response: 200 GET /api/health
[2025-08-10T16:59:37.913Z] GET /api/health - IP: ::1
[2025-08-10T16:59:37.913Z] Response: 200 GET /api/health
[2025-08-10T16:59:39.954Z] GET /api/health - IP: ::1
[2025-08-10T16:59:39.954Z] Response: 200 GET /api/health
[2025-08-10T16:59:54.523Z] GET /api/health - IP: ::1
[2025-08-10T16:59:54.523Z] Response: 200 GET /api/health
[2025-08-10T17:10:32.091Z] GET /api/health - IP: ::1
[2025-08-10T17:10:32.091Z] Response: 200 GET /api/health
[2025-08-10T17:10:35.576Z] GET /api/health - IP: ::1
[2025-08-10T17:10:35.576Z] Response: 200 GET /api/health
[2025-08-10T17:10:46.320Z] GET /api/health - IP: ::1
[2025-08-10T17:10:46.320Z] Response: 200 GET /api/health
[2025-08-10T17:11:01.445Z] GET /api/health - IP: ::1
[2025-08-10T17:11:01.445Z] Response: 200 GET /api/health
[2025-08-10T17:11:31.446Z] GET /api/health - IP: ::1
[2025-08-10T17:11:31.446Z] Response: 200 GET /api/health
[2025-08-10T17:12:32.445Z] GET /api/health - IP: ::1
[2025-08-10T17:12:32.445Z] Response: 200 GET /api/health
[2025-08-10T17:13:33.448Z] GET /api/health - IP: ::1
[2025-08-10T17:13:33.448Z] Response: 200 GET /api/health
[2025-08-10T17:14:00.540Z] GET /api/health - IP: ::1
[2025-08-10T17:14:00.540Z] Response: 200 GET /api/health
[2025-08-10T17:14:08.832Z] GET /api/health - IP: ::1
[2025-08-10T17:14:08.832Z] Response: 200 GET /api/health
[2025-08-10T17:14:10.161Z] GET /api/health - IP: ::1
[2025-08-10T17:14:10.161Z] Response: 200 GET /api/health
[2025-08-10T17:15:05.761Z] GET /api/gemini-key - IP: ::1
[2025-08-10T17:15:05.762Z] üîë API Key Request - Using round-robin allocation...
[2025-08-10T17:15:05.762Z] üîÑ Starting round-robin API key allocation...
[2025-08-10T17:15:05.762Z] üéØ Found 3 keys with minimum allocation count: 0
[2025-08-10T17:15:05.762Z] üß™ Testing admin key AIzaSyDn......
[2025-08-10T17:15:05.784Z] üß™ Testing API key AIzaSyDn... with Gemini API...
[2025-08-10T17:15:05.784Z] ‚úÖ API key AIzaSyDn... validation successful
[2025-08-10T17:15:05.762Z] ‚úÖ Key AIzaSyDn... is valid, allocating...
[2025-08-10T17:15:05.762Z] üìä Updated admin key allocation count to 1
üìà Tracked allocation for http://localhost:3002/api - Total: 1
[2025-08-10T17:15:05.762Z] ‚úÖ API Key Provided: AIzaSyDn...DH3Y (850ms)
[2025-08-10T17:15:05.761Z] Response: 200 GET /api/gemini-key
[2025-08-10T17:19:49.358Z] GET /api/health - IP: ::1
[2025-08-10T17:19:49.358Z] Response: 200 GET /api/health
[2025-08-10T17:19:59.390Z] GET /api/health - IP: ::1
[2025-08-10T17:19:59.390Z] Response: 200 GET /api/health
[2025-08-10T17:20:00.533Z] GET /api/health - IP: ::1
[2025-08-10T17:20:00.533Z] Response: 200 GET /api/health
[2025-08-10T17:21:35.057Z] GET /api/health - IP: ::1
[2025-08-10T17:21:35.057Z] Response: 200 GET /api/health
[2025-08-10T17:22:01.440Z] GET /api/health - IP: ::1
[2025-08-10T17:22:01.440Z] Response: 200 GET /api/health
[2025-08-10T17:22:31.438Z] GET /api/health - IP: ::1
[2025-08-10T17:22:31.438Z] Response: 200 GET /api/health
[2025-08-10T17:22:56.354Z] GET /api/health - IP: ::1
[2025-08-10T17:22:56.354Z] Response: 200 GET /api/health
[2025-08-10T17:23:00.559Z] GET /api/health - IP: ::1
[2025-08-10T17:23:00.559Z] Response: 200 GET /api/health
[2025-08-10T17:23:03.070Z] GET /api/health - IP: ::1
[2025-08-10T17:23:03.070Z] Response: 200 GET /api/health
[2025-08-10T17:23:03.937Z] GET /api/health - IP: ::1
[2025-08-10T17:23:03.937Z] Response: 200 GET /api/health
[2025-08-10T17:23:04.696Z] GET /api/health - IP: ::1
[2025-08-10T17:23:04.696Z] Response: 200 GET /api/health
[2025-08-10T17:23:10.301Z] GET /api/health - IP: ::1
[2025-08-10T17:23:10.301Z] Response: 200 GET /api/health
[2025-08-10T17:23:11.258Z] GET /api/health - IP: ::1
[2025-08-10T17:23:11.258Z] Response: 200 GET /api/health
[2025-08-10T17:23:20.455Z] GET /api/health - IP: ::1
[2025-08-10T17:23:20.455Z] Response: 200 GET /api/health
[2025-08-10T17:23:21.115Z] GET /api/health - IP: ::1
[2025-08-10T17:23:21.115Z] Response: 200 GET /api/health
[2025-08-10T17:23:30.556Z] GET /api/health - IP: ::1
[2025-08-10T17:23:30.556Z] Response: 200 GET /api/health
[2025-08-10T17:24:01.472Z] GET /api/health - IP: ::1
[2025-08-10T17:24:01.472Z] Response: 200 GET /api/health
[2025-08-10T17:24:25.638Z] GET /api/gemini-key - IP: ::1
[2025-08-10T17:24:25.638Z] üîë API Key Request - Using round-robin allocation...
[2025-08-10T17:24:25.638Z] üîÑ Starting round-robin API key allocation...
[2025-08-10T17:24:25.638Z] üéØ Found 1 keys with minimum allocation count: 0
[2025-08-10T17:24:25.638Z] üß™ Testing admin key AIzaSyBj......
[2025-08-10T17:24:25.664Z] üß™ Testing API key AIzaSyBj... with Gemini API...
[2025-08-10T17:24:25.664Z] ‚úÖ API key AIzaSyBj... validation successful
[2025-08-10T17:24:25.638Z] ‚úÖ Key AIzaSyBj... is valid, allocating...
[2025-08-10T17:24:25.638Z] üìä Updated admin key allocation count to 1
üìà Tracked allocation for http://localhost:3002/api - Total: 2
[2025-08-10T17:24:25.638Z] ‚úÖ API Key Provided: AIzaSyBj...wofA (946ms)
[2025-08-10T17:24:25.638Z] Response: 200 GET /api/gemini-key
[2025-08-10T17:24:31.526Z] GET /api/health - IP: ::1
[2025-08-10T17:24:31.526Z] Response: 200 GET /api/health
[2025-08-10T17:25:01.469Z] GET /api/health - IP: ::1
[2025-08-10T17:25:01.469Z] Response: 200 GET /api/health
[2025-08-10T17:25:31.483Z] GET /api/health - IP: ::1
[2025-08-10T17:25:31.483Z] Response: 200 GET /api/health
[2025-08-10T17:26:32.723Z] GET /api/health - IP: ::1
[2025-08-10T17:26:32.723Z] Response: 200 GET /api/health
[2025-08-10T17:27:01.475Z] GET /api/health - IP: ::1
[2025-08-10T17:27:01.475Z] Response: 200 GET /api/health
[2025-08-10T17:27:31.471Z] GET /api/health - IP: ::1
[2025-08-10T17:27:31.471Z] Response: 200 GET /api/health
[2025-08-10T17:28:01.477Z] GET /api/health - IP: ::1
[2025-08-10T17:28:01.477Z] Response: 200 GET /api/health
[2025-08-10T17:28:48.476Z] GET /api/health - IP: ::1
[2025-08-10T17:28:48.476Z] Response: 200 GET /api/health
[2025-08-10T17:28:57.170Z] GET /api/health - IP: ::1
[2025-08-10T17:29:05.960Z] GET /api/health - IP: ::1
[2025-08-10T17:29:14.860Z] GET /api/health - IP: ::1
[2025-08-10T17:29:05.960Z] Response: 200 GET /api/health
[2025-08-10T17:29:14.860Z] Response: 200 GET /api/health
[2025-08-10T17:29:16.010Z] GET /api/health - IP: ::1
[2025-08-10T17:29:16.010Z] Response: 200 GET /api/health
[2025-08-10T17:28:57.170Z] Response: 200 GET /api/health
[2025-08-10T17:29:19.928Z] GET /api/health - IP: ::1
[2025-08-10T17:29:19.928Z] Response: 200 GET /api/health
[2025-08-10T17:29:25.187Z] GET /api/health - IP: ::1
[2025-08-10T17:29:25.187Z] Response: 200 GET /api/health
[2025-08-10T17:29:29.490Z] GET /api/health - IP: ::1
[2025-08-10T17:29:29.490Z] Response: 200 GET /api/health
[2025-08-10T17:29:35.900Z] GET /api/health - IP: ::1
[2025-08-10T17:29:35.900Z] Response: 200 GET /api/health
[2025-08-10T17:29:37.143Z] GET /api/health - IP: ::1
[2025-08-10T17:29:37.143Z] Response: 200 GET /api/health
[2025-08-10T17:29:38.900Z] GET /api/health - IP: ::1
[2025-08-10T17:29:38.900Z] Response: 200 GET /api/health
[2025-08-10T17:35:39.456Z] GET /api/health - IP: ::1
[2025-08-10T17:35:43.457Z] GET /api/health - IP: ::1
[2025-08-10T17:35:47.457Z] GET /api/health - IP: ::1
[2025-08-10T17:36:50.219Z] ‚ö†Ô∏è Mongoose disconnected from MongoDB
[2025-08-10T17:37:10.482Z] üîó Mongoose connected to MongoDB
[2025-08-10T17:35:39.456Z] Response: 503 GET /api/health
[2025-08-10T17:35:39.456Z] Error Response: {"status":"unhealthy","database":"disconnected","timestamp":"2025-08-10T17:37:10.641Z"}
[2025-08-10T17:35:43.457Z] Response: 200 GET /api/health
üìä Resumed usage tracking for server: http://localhost:3002/api
[2025-08-10T17:35:47.457Z] Response: 200 GET /api/health
[2025-08-10T18:13:40.535Z] GET /api/health - IP: ::1
[2025-08-10T18:13:40.535Z] Response: 200 GET /api/health
[2025-08-10T18:13:46.149Z] GET /api/health - IP: ::1
[2025-08-10T18:13:46.149Z] Response: 200 GET /api/health
[2025-08-10T18:14:16.505Z] GET /api/health - IP: ::1
[2025-08-10T18:14:16.505Z] Response: 200 GET /api/health
[2025-08-10T18:14:46.516Z] GET /api/health - IP: ::1
[2025-08-10T18:14:46.516Z] Response: 200 GET /api/health
[2025-08-10T18:15:16.516Z] GET /api/health - IP: ::1
[2025-08-10T18:15:16.516Z] Response: 200 GET /api/health
[2025-08-10T18:15:46.520Z] GET /api/health - IP: ::1
[2025-08-10T18:15:46.520Z] Response: 200 GET /api/health
[2025-08-10T18:16:16.521Z] GET /api/health - IP: ::1
[2025-08-10T18:16:16.521Z] Response: 200 GET /api/health
[2025-08-10T18:16:21.345Z] GET /api/health - IP: ::1
[2025-08-10T18:16:21.345Z] Response: 200 GET /api/health
[2025-08-10T18:16:33.411Z] GET /api/health - IP: ::1
[2025-08-10T18:16:33.411Z] Response: 200 GET /api/health
[2025-08-10T18:16:46.518Z] GET /api/health - IP: ::1
[2025-08-10T18:16:46.518Z] Response: 200 GET /api/health
[2025-08-10T18:17:16.648Z] GET /api/health - IP: ::1
[2025-08-10T18:17:16.648Z] Response: 200 GET /api/health
[2025-08-10T18:17:48.511Z] GET /api/health - IP: ::1
[2025-08-10T18:17:48.511Z] Response: 200 GET /api/health
[2025-08-10T18:18:48.553Z] GET /api/health - IP: ::1
[2025-08-10T18:18:48.553Z] Response: 200 GET /api/health
[2025-08-10T18:19:48.519Z] GET /api/health - IP: ::1
[2025-08-10T18:19:48.519Z] Response: 200 GET /api/health
[2025-08-10T18:20:48.537Z] GET /api/health - IP: ::1
[2025-08-10T18:20:48.537Z] Response: 200 GET /api/health
[2025-08-10T18:21:48.534Z] GET /api/health - IP: ::1
[2025-08-10T18:21:48.534Z] Response: 200 GET /api/health
[2025-08-10T18:22:48.517Z] GET /api/health - IP: ::1
[2025-08-10T18:22:48.517Z] Response: 200 GET /api/health
[2025-08-10T18:23:48.535Z] GET /api/health - IP: ::1
[2025-08-10T18:23:48.535Z] Response: 200 GET /api/health
[2025-08-10T18:24:48.532Z] GET /api/health - IP: ::1
[2025-08-10T18:24:48.532Z] Response: 200 GET /api/health
[2025-08-10T18:25:48.534Z] GET /api/health - IP: ::1
[2025-08-10T18:25:48.534Z] Response: 200 GET /api/health
[2025-08-10T18:26:48.532Z] GET /api/health - IP: ::1
[2025-08-10T18:26:48.532Z] Response: 200 GET /api/health
[2025-08-10T18:27:48.537Z] GET /api/health - IP: ::1
[2025-08-10T18:27:48.537Z] Response: 200 GET /api/health
